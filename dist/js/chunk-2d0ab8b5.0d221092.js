(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab8b5"],{1671:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"full"},[n("div",{ref:"kv1",staticClass:"full absolute top-0 left-0"}),e.getApp?n("div",{staticClass:"absolute top-0 left-0 text-white"},[n("MenuArea")],1):e._e()])},i=[],a=(n("6b54"),n("2397"),n("d225")),r=n("013f"),s=n("4e2b"),l=n("308d"),c=n("6bb5"),p=n("b1a0"),h=n("5a89"),u=n("2e71"),d=n("bf13"),w=n("768b"),m=(n("63d9"),n("c5f6"),n("7f7f"),n("ac6a"),function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),h["A"].call(this),this.visible=!1,this.domElement=t;var n=new v;this.add(n);var o=new f;this.add(o);var i=this;W("camera",e),W("object",void 0),W("enabled",!0),W("axis",null),W("mode","translate"),W("translationSnap",null),W("rotationSnap",null),W("scaleSnap",null),W("space","world"),W("size",1),W("dragging",!1),W("showX",!0),W("showY",!0),W("showZ",!0);var a={type:"change"},r={type:"mouseDown"},s={type:"mouseUp",mode:i.mode},l={type:"objectChange"},c=new h["I"];function p(e,t,n){for(var o=t.intersectObject(e,!0),i=0;i<o.length;i++)if(o[i].object.visible||n)return o[i];return!1}var u=new h["T"],d=new h["T"],w=new h["F"],m={X:new h["T"](1,0,0),Y:new h["T"](0,1,0),Z:new h["T"](0,0,1)},y=new h["T"],b=new h["T"],g=new h["T"],x=new h["T"],M=new h["T"],P=new h["T"],T=0,E=new h["T"],S=new h["F"],X=new h["T"],Y=new h["T"],A=new h["F"],Z=new h["F"],I=new h["T"],j=new h["T"],z=new h["F"],F=new h["T"],Q=new h["T"],O=new h["F"],k=new h["F"],L=new h["T"],C=new h["T"],D=new h["T"],q=new h["F"],R=new h["T"];function W(e,t){var r=t;Object.defineProperty(i,e,{get:function(){return void 0!==r?r:t},set:function(t){r!==t&&(r=t,o[e]=t,n[e]=t,i.dispatchEvent({type:e+"-changed",value:t}),i.dispatchEvent(a))}}),i[e]=t,o[e]=t,n[e]=t}function _(e){if(i.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var n=e.changedTouches?e.changedTouches[0]:e,o=t.getBoundingClientRect();return{x:(n.clientX-o.left)/o.width*2-1,y:-(n.clientY-o.top)/o.height*2+1,button:e.button}}function N(e){if(i.enabled)switch(e.pointerType){case"mouse":case"pen":i.pointerHover(_(e));break}}function B(e){i.enabled&&(i.domElement.style.touchAction="none",i.domElement.ownerDocument.addEventListener("pointermove",H,!1),i.pointerHover(_(e)),i.pointerDown(_(e)))}function H(e){i.enabled&&i.pointerMove(_(e))}function U(e){i.enabled&&(i.domElement.style.touchAction="",i.domElement.ownerDocument.removeEventListener("pointermove",H,!1),i.pointerUp(_(e)))}W("worldPosition",Q),W("worldPositionStart",j),W("worldQuaternion",O),W("worldQuaternionStart",z),W("cameraPosition",E),W("cameraQuaternion",S),W("pointStart",y),W("pointEnd",b),W("rotationAxis",x),W("rotationAngle",T),W("eye",C),t.addEventListener("pointerdown",B,!1),t.addEventListener("pointermove",N,!1),i.domElement.ownerDocument.addEventListener("pointerup",U,!1),this.dispose=function(){t.removeEventListener("pointerdown",B),t.removeEventListener("pointermove",N),i.domElement.ownerDocument.removeEventListener("pointermove",H),i.domElement.ownerDocument.removeEventListener("pointerup",U),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))},this.attach=function(e){return this.object=e,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(Y,A,I),this.object.matrixWorld.decompose(Q,O,L),Z.copy(A).inverse(),k.copy(O).inverse()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(E,S,X),C.copy(E).sub(Q).normalize(),h["A"].prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging){c.setFromCamera(e,this.camera);var t=p(n.picker[this.mode],c);this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){c.setFromCamera(e,this.camera);var t=p(o,c,!0);if(t){var n=this.space;if("scale"===this.mode?n="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(n="world"),"local"===n&&"rotate"===this.mode){var i=this.rotationSnap;"X"===this.axis&&i&&(this.object.rotation.x=Math.round(this.object.rotation.x/i)*i),"Y"===this.axis&&i&&(this.object.rotation.y=Math.round(this.object.rotation.y/i)*i),"Z"===this.axis&&i&&(this.object.rotation.z=Math.round(this.object.rotation.z/i)*i)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),D.copy(this.object.position),q.copy(this.object.quaternion),R.copy(this.object.scale),this.object.matrixWorld.decompose(j,z,F),y.copy(t.point).sub(j)}this.dragging=!0,r.mode=this.mode,this.dispatchEvent(r)}},this.pointerMove=function(e){var t=this.axis,n=this.mode,i=this.object,r=this.space;if("scale"===n?r="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(r="world"),void 0!==i&&null!==t&&!1!==this.dragging&&-1===e.button){c.setFromCamera(e,this.camera);var s=p(o,c,!0);if(s){if(b.copy(s.point).sub(j),"translate"===n)g.copy(b).sub(y),"local"===r&&"XYZ"!==t&&g.applyQuaternion(k),-1===t.indexOf("X")&&(g.x=0),-1===t.indexOf("Y")&&(g.y=0),-1===t.indexOf("Z")&&(g.z=0),"local"===r&&"XYZ"!==t?g.applyQuaternion(q).divide(I):g.applyQuaternion(Z).divide(I),i.position.copy(g).add(D),this.translationSnap&&("local"===r&&(i.position.applyQuaternion(w.copy(q).inverse()),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(q)),"world"===r&&(i.parent&&i.position.add(u.setFromMatrixPosition(i.parent.matrixWorld)),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(u.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){var h=b.length()/y.length();b.dot(y)<0&&(h*=-1),d.set(h,h,h)}else u.copy(y),d.copy(b),u.applyQuaternion(k),d.applyQuaternion(k),d.divide(u),-1===t.search("X")&&(d.x=1),-1===t.search("Y")&&(d.y=1),-1===t.search("Z")&&(d.z=1);i.scale.copy(R).multiply(d),this.scaleSnap&&(-1!==t.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){g.copy(b).sub(y);var v=20/Q.distanceTo(u.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(x.copy(C),T=b.angleTo(y),M.copy(y).normalize(),P.copy(b).normalize(),T*=P.cross(M).dot(C)<0?1:-1):"XYZE"===t?(x.copy(g).cross(C).normalize(),T=g.dot(u.copy(x).cross(this.eye))*v):"X"!==t&&"Y"!==t&&"Z"!==t||(x.copy(m[t]),u.copy(m[t]),"local"===r&&u.applyQuaternion(O),T=g.dot(u.cross(C).normalize())*v),this.rotationSnap&&(T=Math.round(T/this.rotationSnap)*this.rotationSnap),this.rotationAngle=T,"local"===r&&"E"!==t&&"XYZE"!==t?(i.quaternion.copy(q),i.quaternion.multiply(w.setFromAxisAngle(x,T)).normalize()):(x.applyQuaternion(Z),i.quaternion.copy(w.setFromAxisAngle(x,T)),i.quaternion.multiply(q).normalize())}this.dispatchEvent(a),this.dispatchEvent(l)}}},this.pointerUp=function(e){0===e.button&&(this.dragging&&null!==this.axis&&(s.mode=this.mode,this.dispatchEvent(s)),this.dragging=!1,this.axis=null)},this.getMode=function(){return i.mode},this.setMode=function(e){i.mode=e},this.setTranslationSnap=function(e){i.translationSnap=e},this.setRotationSnap=function(e){i.rotationSnap=e},this.setScaleSnap=function(e){i.scaleSnap=e},this.setSize=function(e){i.size=e},this.setSpace=function(e){i.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}});m.prototype=Object.assign(Object.create(h["A"].prototype),{constructor:m,isTransformControls:!0});var v=function(){h["A"].call(this),this.type="TransformControlsGizmo";var e=new h["x"]({depthTest:!1,depthWrite:!1,transparent:!0,side:h["j"],fog:!1,toneMapped:!1}),t=new h["s"]({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),n=e.clone();n.opacity=.15;var o=e.clone();o.opacity=.33;var i=e.clone();i.color.set(16711680);var a=e.clone();a.color.set(65280);var r=e.clone();r.color.set(255);var s=e.clone();s.opacity=.25;var l=s.clone();l.color.set(16776960);var c=s.clone();c.color.set(65535);var p=s.clone();p.color.set(16711935);var u=e.clone();u.color.set(16776960);var d=t.clone();d.color.set(16711680);var w=t.clone();w.color.set(65280);var m=t.clone();m.color.set(255);var v=t.clone();v.color.set(65535);var f=t.clone();f.color.set(16711935);var y=t.clone();y.color.set(16776960);var b=t.clone();b.color.set(7895160);var g=y.clone();g.opacity=.25;var x=new h["h"](0,.05,.2,12,1,!1),M=new h["c"](.125,.125,.125),P=new h["e"];P.setAttribute("position",new h["m"]([0,0,0,1,0,0],3));var T=function(e,t){for(var n=new h["e"],o=[],i=0;i<=64*t;++i)o.push(0,Math.cos(i/32*Math.PI)*e,Math.sin(i/32*Math.PI)*e);return n.setAttribute("position",new h["m"](o,3)),n},E=function(){var e=new h["e"];return e.setAttribute("position",new h["m"]([0,0,0,1,1,1],3)),e},S={X:[[new h["w"](x,i),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new h["w"](x,i),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new h["r"](P,d)]],Y:[[new h["w"](x,a),[0,1,0],null,null,"fwd"],[new h["w"](x,a),[0,1,0],[Math.PI,0,0],null,"bwd"],[new h["r"](P,w),null,[0,0,Math.PI/2]]],Z:[[new h["w"](x,r),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new h["w"](x,r),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new h["r"](P,m),null,[0,-Math.PI/2,0]]],XYZ:[[new h["w"](new h["B"](.1,0),s.clone()),[0,0,0],[0,0,0]]],XY:[[new h["w"](new h["E"](.295,.295),l.clone()),[.15,.15,0]],[new h["r"](P,y),[.18,.3,0],null,[.125,1,1]],[new h["r"](P,y),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new h["w"](new h["E"](.295,.295),c.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new h["r"](P,v),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new h["r"](P,v),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new h["w"](new h["E"](.295,.295),p.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new h["r"](P,f),[.18,0,.3],null,[.125,1,1]],[new h["r"](P,f),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},X={X:[[new h["w"](new h["h"](.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new h["w"](new h["h"](.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new h["w"](new h["h"](.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new h["w"](new h["B"](.2,0),n)]],XY:[[new h["w"](new h["E"](.4,.4),n),[.2,.2,0]]],YZ:[[new h["w"](new h["E"](.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new h["w"](new h["E"](.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},Y={START:[[new h["w"](new h["B"](.01,2),o),null,null,null,"helper"]],END:[[new h["w"](new h["B"](.01,2),o),null,null,null,"helper"]],DELTA:[[new h["r"](E(),o),null,null,null,"helper"]],X:[[new h["r"](P,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new h["r"](P,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new h["r"](P,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},A={X:[[new h["r"](T(1,.5),d)],[new h["w"](new h["B"](.04,0),i),[0,0,.99],null,[1,3,1]]],Y:[[new h["r"](T(1,.5),w),null,[0,0,-Math.PI/2]],[new h["w"](new h["B"](.04,0),a),[0,0,.99],null,[3,1,1]]],Z:[[new h["r"](T(1,.5),m),null,[0,Math.PI/2,0]],[new h["w"](new h["B"](.04,0),r),[.99,0,0],null,[1,3,1]]],E:[[new h["r"](T(1.25,1),g),null,[0,Math.PI/2,0]],[new h["w"](new h["h"](.03,0,.15,4,1,!1),g),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new h["w"](new h["h"](.03,0,.15,4,1,!1),g),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new h["w"](new h["h"](.03,0,.15,4,1,!1),g),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new h["w"](new h["h"](.03,0,.15,4,1,!1),g),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new h["r"](T(1,1),b),null,[0,Math.PI/2,0]]]},Z={AXIS:[[new h["r"](P,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},I={X:[[new h["w"](new h["Q"](1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new h["w"](new h["Q"](1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new h["w"](new h["Q"](1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new h["w"](new h["Q"](1.25,.1,2,24),n)]],XYZE:[[new h["w"](new h["M"](.7,10,8),n)]]},j={X:[[new h["w"](M,i),[.8,0,0],[0,0,-Math.PI/2]],[new h["r"](P,d),null,null,[.8,1,1]]],Y:[[new h["w"](M,a),[0,.8,0]],[new h["r"](P,w),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new h["w"](M,r),[0,0,.8],[Math.PI/2,0,0]],[new h["r"](P,m),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new h["w"](M,l),[.85,.85,0],null,[2,2,.2]],[new h["r"](P,y),[.855,.98,0],null,[.125,1,1]],[new h["r"](P,y),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new h["w"](M,c),[0,.85,.85],null,[.2,2,2]],[new h["r"](P,v),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new h["r"](P,v),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new h["w"](M,p),[.85,0,.85],null,[2,.2,2]],[new h["r"](P,f),[.855,0,.98],null,[.125,1,1]],[new h["r"](P,f),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new h["w"](new h["c"](.125,.125,.125),s.clone()),[1.1,0,0]]],XYZY:[[new h["w"](new h["c"](.125,.125,.125),s.clone()),[0,1.1,0]]],XYZZ:[[new h["w"](new h["c"](.125,.125,.125),s.clone()),[0,0,1.1]]]},z={X:[[new h["w"](new h["h"](.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new h["w"](new h["h"](.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new h["w"](new h["h"](.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new h["w"](M,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new h["w"](M,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new h["w"](M,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new h["w"](new h["c"](.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new h["w"](new h["c"](.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new h["w"](new h["c"](.2,.2,.2),n),[0,0,1.1]]]},F={X:[[new h["r"](P,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new h["r"](P,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new h["r"](P,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},Q=function(e){var t=new h["A"];for(var n in e)for(var o=e[n].length;o--;){var i=e[n][o][0].clone(),a=e[n][o][1],r=e[n][o][2],s=e[n][o][3],l=e[n][o][4];i.name=n,i.tag=l,a&&i.position.set(a[0],a[1],a[2]),r&&i.rotation.set(r[0],r[1],r[2]),s&&i.scale.set(s[0],s[1],s[2]),i.updateMatrix();var c=i.geometry.clone();c.applyMatrix4(i.matrix),i.geometry=c,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),t.add(i)}return t},O=new h["T"](0,0,0),k=new h["k"],L=new h["T"](0,1,0),C=new h["T"](0,0,0),D=new h["v"],q=new h["F"],R=new h["F"],W=new h["F"],_=new h["T"](1,0,0),N=new h["T"](0,1,0),B=new h["T"](0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo["translate"]=Q(S)),this.add(this.gizmo["rotate"]=Q(A)),this.add(this.gizmo["scale"]=Q(j)),this.add(this.picker["translate"]=Q(X)),this.add(this.picker["rotate"]=Q(I)),this.add(this.picker["scale"]=Q(z)),this.add(this.helper["translate"]=Q(Y)),this.add(this.helper["rotate"]=Q(Z)),this.add(this.helper["scale"]=Q(F)),this.picker["translate"].visible=!1,this.picker["rotate"].visible=!1,this.picker["scale"].visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:W;this.gizmo["translate"].visible="translate"===this.mode,this.gizmo["rotate"].visible="rotate"===this.mode,this.gizmo["scale"].visible="scale"===this.mode,this.helper["translate"].visible="translate"===this.mode,this.helper["rotate"].visible="rotate"===this.mode,this.helper["scale"].visible="scale"===this.mode;var n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(var o=0;o<n.length;o++){var i,a=n[o];if(a.visible=!0,a.rotation.set(0,0,0),a.position.copy(this.worldPosition),i=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),a.scale.set(1,1,1).multiplyScalar(i*this.size/7),"helper"!==a.tag){if(a.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){var r=.99,s=.2,l=0;"X"!==a.name&&"XYZX"!==a.name||Math.abs(L.copy(_).applyQuaternion(t).dot(this.eye))>r&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Y"!==a.name&&"XYZY"!==a.name||Math.abs(L.copy(N).applyQuaternion(t).dot(this.eye))>r&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Z"!==a.name&&"XYZZ"!==a.name||Math.abs(L.copy(B).applyQuaternion(t).dot(this.eye))>r&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XY"===a.name&&Math.abs(L.copy(B).applyQuaternion(t).dot(this.eye))<s&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"YZ"===a.name&&Math.abs(L.copy(_).applyQuaternion(t).dot(this.eye))<s&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XZ"===a.name&&Math.abs(L.copy(N).applyQuaternion(t).dot(this.eye))<s&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),-1!==a.name.search("X")&&(L.copy(_).applyQuaternion(t).dot(this.eye)<l?"fwd"===a.tag?a.visible=!1:a.scale.x*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Y")&&(L.copy(N).applyQuaternion(t).dot(this.eye)<l?"fwd"===a.tag?a.visible=!1:a.scale.y*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Z")&&(L.copy(B).applyQuaternion(t).dot(this.eye)<l?"fwd"===a.tag?a.visible=!1:a.scale.z*=-1:"bwd"===a.tag&&(a.visible=!1))}else"rotate"===this.mode&&(R.copy(t),L.copy(this.eye).applyQuaternion(q.copy(t).inverse()),-1!==a.name.search("E")&&a.quaternion.setFromRotationMatrix(D.lookAt(this.eye,C,N)),"X"===a.name&&(q.setFromAxisAngle(_,Math.atan2(-L.y,L.z)),q.multiplyQuaternions(R,q),a.quaternion.copy(q)),"Y"===a.name&&(q.setFromAxisAngle(N,Math.atan2(L.x,L.z)),q.multiplyQuaternions(R,q),a.quaternion.copy(q)),"Z"===a.name&&(q.setFromAxisAngle(B,Math.atan2(L.y,L.x)),q.multiplyQuaternions(R,q),a.quaternion.copy(q)));a.visible=a.visible&&(-1===a.name.indexOf("X")||this.showX),a.visible=a.visible&&(-1===a.name.indexOf("Y")||this.showY),a.visible=a.visible&&(-1===a.name.indexOf("Z")||this.showZ),a.visible=a.visible&&(-1===a.name.indexOf("E")||this.showX&&this.showY&&this.showZ),a.material._opacity=a.material._opacity||a.material.opacity,a.material._color=a.material._color||a.material.color.clone(),a.material.color.copy(a.material._color),a.material.opacity=a.material._opacity,this.enabled?this.axis&&(a.name===this.axis||this.axis.split("").some((function(e){return a.name===e}))?(a.material.opacity=1,a.material.color.lerp(new h["g"](1,1,1),.5)):(a.material.opacity*=.25,a.material.color.lerp(new h["g"](1,1,1),.5))):(a.material.opacity*=.5,a.material.color.lerp(new h["g"](1,1,1),.5))}else a.visible=!1,"AXIS"===a.name?(a.position.copy(this.worldPositionStart),a.visible=!!this.axis,"X"===this.axis&&(q.setFromEuler(k.set(0,0,0)),a.quaternion.copy(t).multiply(q),Math.abs(L.copy(_).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Y"===this.axis&&(q.setFromEuler(k.set(0,0,Math.PI/2)),a.quaternion.copy(t).multiply(q),Math.abs(L.copy(N).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Z"===this.axis&&(q.setFromEuler(k.set(0,Math.PI/2,0)),a.quaternion.copy(t).multiply(q),Math.abs(L.copy(B).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"XYZE"===this.axis&&(q.setFromEuler(k.set(0,Math.PI/2,0)),L.copy(this.rotationAxis),a.quaternion.setFromRotationMatrix(D.lookAt(C,L,N)),a.quaternion.multiply(q),a.visible=this.dragging),"E"===this.axis&&(a.visible=!1)):"START"===a.name?(a.position.copy(this.worldPositionStart),a.visible=this.dragging):"END"===a.name?(a.position.copy(this.worldPosition),a.visible=this.dragging):"DELTA"===a.name?(a.position.copy(this.worldPositionStart),a.quaternion.copy(this.worldQuaternionStart),O.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),O.applyQuaternion(this.worldQuaternionStart.clone().inverse()),a.scale.copy(O),a.visible=this.dragging):(a.quaternion.copy(t),this.dragging?a.position.copy(this.worldPositionStart):a.position.copy(this.worldPosition),this.axis&&(a.visible=-1!==this.axis.search(a.name)))}h["A"].prototype.updateMatrixWorld.call(this)}};v.prototype=Object.assign(Object.create(h["A"].prototype),{constructor:v,isTransformControlsGizmo:!0});var f=function(){h["w"].call(this,new h["E"](1e5,1e5,2,2),new h["x"]({visible:!1,wireframe:!0,side:h["j"],transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane";var e=new h["T"](1,0,0),t=new h["T"](0,1,0),n=new h["T"](0,0,1),o=new h["T"],i=new h["T"],a=new h["T"],r=new h["v"],s=new h["F"];this.updateMatrixWorld=function(){var l=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(l="local"),e.set(1,0,0).applyQuaternion("local"===l?this.worldQuaternion:s),t.set(0,1,0).applyQuaternion("local"===l?this.worldQuaternion:s),n.set(0,0,1).applyQuaternion("local"===l?this.worldQuaternion:s),a.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":a.copy(this.eye).cross(e),i.copy(e).cross(a);break;case"Y":a.copy(this.eye).cross(t),i.copy(t).cross(a);break;case"Z":a.copy(this.eye).cross(n),i.copy(n).cross(a);break;case"XY":i.copy(n);break;case"YZ":i.copy(e);break;case"XZ":a.copy(n),i.copy(t);break;case"XYZ":case"E":i.set(0,0,0);break}break;case"rotate":default:i.set(0,0,0)}0===i.length()?this.quaternion.copy(this.cameraQuaternion):(r.lookAt(o.set(0,0,0),i,a),this.quaternion.setFromRotationMatrix(r)),h["A"].prototype.updateMatrixWorld.call(this)}};f.prototype=Object.assign(Object.create(h["w"].prototype),{constructor:f,isTransformControlsPlane:!0});var y=n("8992"),b=function e(t){var n=t.ctx,o=t.runEditor,i=void 0===o||o;Object(a["a"])(this,e);var r=3,s=10,l=Math.pow(s,r),c=5,p=200,u=!1,d=new x({count:l,numSides:c,subdivisions:p,openEnded:u,dimension:r}),w=[new h["T"](-153.4197541332805,602.2842649103882,359.418400289163),new h["T"](-392.0363395266815,570.4566516367261,-73.45548420131888),new h["T"](186.94941449888915,560.3151130695674,-437.2747381058281),new h["T"](681.5478987247174,102.66487050746449,-549.0420662782607),new h["T"](679.1265410036509,317.9163259626413,125.20635116261195),new h["T"](320.42945622005925,-1.4501254737023075,715.1495822876569),new h["T"](-408.91078659800064,221.57512686921615,585.4569096178118),new h["T"](-592.084540628733,124.02196204099367,-143.6297593666219)],m=function(e){var t=e.name,n=void 0===t?"CONTROL_POINTS":t,o=e.pts,i=void 0===o?[]:o,a="",r="".concat(Number(i.length).toFixed(1));i.forEach((function(e,t){a+="\n        else if (index == ".concat(t.toFixed(1),") {\n          result = vec3( ").concat(Number(e.x).toFixed(7),", ").concat(Number(e.y).toFixed(7),", ").concat(Number(e.z).toFixed(7)," );\n        }\n        ")}));var s="\n      vec3 pointIDX_".concat(n," (float index) {\n        vec3 result = vec3(0.0);\n\n        if (false) {\n        } ").concat(a,"\n\n        return result;\n      }\n\n      vec3 catmullRom (vec3 p0, vec3 p1, vec3 p2, vec3 p3, float t) {\n          vec3 v0 = (p2 - p0) * 0.5;\n          vec3 v1 = (p3 - p1) * 0.5;\n          float t2 = t * t;\n          float t3 = t * t * t;\n\n          return vec3((2.0 * p1 - 2.0 * p2 + v0 + v1) * t3 + (-3.0 * p1 + 3.0 * p2 - 2.0 * v0 - v1) * t2 + v0 * t + p1);\n      }\n\n      vec3 getPointAt (float t) {\n        bool closed = false;\n        float ll = ").concat(r,";\n        float minusOne = 1.0;\n        if (closed) {\n          minusOne = 0.0;\n        }\n\n        float p = (ll - minusOne) * t;\n        float intPoint = floor(p);\n        float weight = p - intPoint;\n\n        float idx0 = intPoint - 1.0;\n        float idx1 = intPoint + 0.0;\n        float idx2 = intPoint + 1.0;\n        float idx3 = intPoint + 2.0;\n\n        vec3 pt0 = pointIDX_").concat(n,"(idx0);\n        vec3 pt1 = pointIDX_").concat(n,"(idx1);\n        vec3 pt2 = pointIDX_").concat(n,"(idx2);\n        vec3 pt3 = pointIDX_").concat(n,"(idx3);\n\n        vec3 pointoutput = catmullRom(pt0, pt1, pt2, pt3, weight);\n\n        return pointoutput;\n      }\n      ");return s},v=function(){var e="\n\n      attribute float position;\n      attribute float angle;\n      attribute vec2 uv;\n      attribute vec3 offset;\n      attribute vec2 reader;\n\n      const mat2 m = mat2(0.80,  0.60, -0.60,  0.80);\n\n      float noise(in vec2 p) {\n        return sin(p.x)*sin(p.y);\n      }\n\n      float fbm4( vec2 p ) {\n          float f = 0.0;\n          f += 0.5000 * noise( p ); p = m * p * 2.02;\n          f += 0.2500 * noise( p ); p = m * p * 2.03;\n          f += 0.1250 * noise( p ); p = m * p * 2.01;\n          f += 0.0625 * noise( p );\n          return f / 0.9375;\n      }\n\n      float fbm6( vec2 p ) {\n          float f = 0.0;\n          f += 0.500000*(0.5+0.5*noise( p )); p = m*p*2.02;\n          f += 0.250000*(0.5+0.5*noise( p )); p = m*p*2.03;\n          f += 0.125000*(0.5+0.5*noise( p )); p = m*p*2.01;\n          f += 0.062500*(0.5+0.5*noise( p )); p = m*p*2.04;\n          f += 0.031250*(0.5+0.5*noise( p )); p = m*p*2.01;\n          f += 0.015625*(0.5+0.5*noise( p ));\n          return f/0.96875;\n      }\n\n      float pattern (vec2 p, float time) {\n        float vout = fbm4( p + time + fbm6( p + fbm4( p + time )) );\n        return (vout);\n      }\n\n      mat3 calcLookAtMatrix (vec3 origin, vec3 target, float roll) {\n        vec3 rr = vec3(sin(roll), cos(roll), 0.0);\n        vec3 ww = normalize(target - origin);\n        vec3 uu = normalize(cross(ww, rr));\n        vec3 vv = normalize(cross(uu, ww));\n\n        return mat3(uu, vv, ww);\n      }\n\n      // dough nut\n      // vec3 sample (float t) {\n      //   float angle = t * 2.0 * PI;\n      //   vec2 rot = vec2(cos(angle), sin(angle));\n      //   return vec3(rot, 0.0) * 10.0;\n      // }\n\n      float rand (vec2 co){\n        return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n      }\n\n      float getLooper (float t) {\n        return mod(t * 0.1 + time * 0.5 * rand(vec2(reader.x, reader.x - 0.1)), 1.0);\n      }\n\n\n      // line\n      vec3 sample (float t) {\n        float nextT = t + (1.0 / lengthSegments);\n        float looper = getLooper(t);\n        vec3 coord = getPointAt(looper);\n\n        coord += coord * 0.3 * (rand(vec2(reader.x, reader.x - 0.01)) * 2.0 - 1.0);\n        return coord;\n      }\n\n      void createTube (float t, vec2 volume, out vec3 pos, out vec3 normal) {\n        // find next sample along curve\n        float nextT = t + (1.0 / lengthSegments);\n\n        // sample the curve in two places\n        vec3 cur = sample(t);\n        vec3 next = sample(nextT);\n\n        // compute the Frenet-Serret frame\n        vec3 T = normalize(next - cur);\n        vec3 B = normalize(cross(T, next + cur));\n        vec3 N = -normalize(cross(B, T));\n\n        // extrude outward to create a tube\n        float tubeAngle = angle;\n        float circX = cos(tubeAngle);\n        float circY = sin(tubeAngle);\n\n        // compute position and normal\n        normal.xyz = normalize(B * circX + N * circY);\n        pos.xyz = cur + B * volume.x * circX + N * volume.y * circY;\n      }\n\n      vec3 makeGeo () {\n        float thickness = 20.0;\n        float t = (position * 2.0) * 0.5 + 0.5;\n\n        vec2 volume = vec2(thickness / 10.0);\n        vec3 transformed;\n        vec3 objectNormal;\n        createTube(t, volume, transformed, objectNormal);\n\n        // vec3 transformedNormal = normalMatrix * objectNormal;\n\n        return transformed;\n      }\n      ";return e},f=function(){return"\n        precision highp float;\n        #define PI 3.1415926535897932384626433832795\n        uniform mat4 projectionMatrix;\n        uniform mat4 modelViewMatrix;\n        uniform mat3 normalMatrix;\n\n        // uniforms\n        uniform float time;\n\n        ".concat(m({name:"CONTROL_POINTS",pts:w}),"\n\n        ").concat(v(),"\n\n        void main (void) {\n          vec3 nPos = makeGeo();\n\n          // nPos = nPos + 30.0 * normalize(nPos) * (rand(offset.xz + 20.0 * time) * 2.0 - 1.0);\n\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(nPos, 1.0);\n\n          float t = (position * 2.0) * 0.5 + 0.5;\n          float looper = getLooper(t);\n\n          if (!(looper >= 0.01 && looper <= 0.99)) {\n            gl_Position.w = 0.0;\n          }\n        }\n      ")},y=function(){return new h["H"]({uniforms:{time:{value:0},controlPoints:{value:w}},vertexShader:f(),fragmentShader:"\n          void main (void) {\n            gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);\n          }\n        ",defines:{lengthSegments:p.toFixed(1)}})};n.onLoop((function(){var e=.001*window.performance.now();b.material.uniforms.time.value=e,d.instanceCount=Math.floor(1*l)}));var b=new h["w"](d,y(),l);if(b.frustumCulled=!1,b.userData.bloom=!0,n.scene.add(b),i){var M=function(){return w},P=0,T=function(e){w=e,clearTimeout(P),P=setTimeout((function(){b.material=y()}),150)};new g({ctx:n,getArr:M,setArr:T})}},g=function e(t){var o=t.ctx,i=t.getArr,r=t.setArr;Object(a["a"])(this,e);var s,l,c,p,u=[],d=4,w=[],v=new h["T"],f=new h["I"],b=new h["S"],g=new h["S"],x=new h["S"],M=new h["M"](23,32,32),P=200,T={},E={uniform:!0,tension:.5,centripetal:!1,chordal:!1,addPoint:Y,removePoint:A,exportSpline:j};function S(){l=o.scene,c=o.camera,c.position.set(0,250,1e3),l.add(c),l.add(new h["b"](15790320));var e=new h["O"](16777215,1.5);e.position.set(0,1500,200),e.angle=.2*Math.PI,e.castShadow=!0,e.shadow.camera.near=200,e.shadow.camera.far=2e3,e.shadow.bias=-222e-6,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,l.add(e);var t=new h["E"](2e3,2e3);t.rotateX(-Math.PI/2);var a=new h["L"]({opacity:.2}),r=new h["w"](t,a);r.position.y=-200,r.receiveShadow=!0,l.add(r);var v=new h["n"](2e3,100);v.position.y=-199,v.material.opacity=.25,v.material.transparent=!0,l.add(v),p=o.renderer,p.setPixelRatio(window.devicePixelRatio),p.setSize(window.innerWidth,window.innerHeight),p.shadowMap.enabled=!0;var f=function(){return new y["GUI"]};window.gui&&window.gui.destroy();var b=f();window.gui=b,console.log(b),b.add(E,"addPoint"),b.add(E,"removePoint"),b.add(E,"exportSpline"),b.open();var g=n("4721").OrbitControls;o.root.controls=new g(o.root.camera,o.el);var x=o.controls;x.damping=.2,x.addEventListener("change",Q),s=new m(c,p.domElement),s.addEventListener("change",Q),s.addEventListener("dragging-changed",(function(e){x.enabled=!e.value})),l.add(s),s.addEventListener("objectChange",(function(){I()})),document.addEventListener("pointerdown",O,!1),document.addEventListener("pointerup",k,!1),document.addEventListener("pointermove",L,!1);for(var M=0;M<d;M++)X(w[M]);w.length=0;for(var S=0;S<d;S++)w.push(u[S].position);var Y=new h["e"];Y.setAttribute("position",new h["d"](new Float32Array(3*P),3));var A=new h["f"](w);for(var Z in A.curveType="catmullrom",A.mesh=new h["r"](Y.clone(),new h["s"]({color:16711680,opacity:.35})),A.mesh.castShadow=!0,T.uniform=A,T){var j=T[Z];l.add(j.mesh)}z(i())}function X(e){var t=new h["y"]({color:16777215*Math.random()}),n=new h["w"](M,t);return e?n.position.copy(e):(n.position.x=1e3*Math.random()-500,n.position.y=600*Math.random(),n.position.z=800*Math.random()-400),n.castShadow=!0,n.receiveShadow=!0,l.add(n),u.push(n),n}function Y(){d++,w.push(X().position),I()}function A(){if(!(d<=4)){var e=u.pop();d--,w.pop(),s.object===e&&s.detach(),l.remove(e),I()}}S(),F();var Z=0;function I(){for(var e in T){for(var t=T[e],n=t.mesh,o=n.geometry.attributes.position,i=0;i<P;i++){var a=i/(P-1);t.getPoint(a,v),o.setXYZ(i,v.x,v.y,v.z)}o.needsUpdate=!0}clearTimeout(Z),Z=setTimeout((function(){r(w)}),10)}function j(){for(var e=[],t=0;t<d;t++){var n=u[t].position;e.push("new THREE.Vector3(".concat(n.x,", ").concat(n.y,", ").concat(n.z,")"))}console.log(e.join(",\n"));var o="["+e.join(",\n\t")+"]";prompt("copy and paste code",o)}function z(e){while(e.length>w.length)Y();while(e.length<w.length)A();for(var t=0;t<w.length;t++)w[t].copy(e[t]);I()}function F(){requestAnimationFrame(F),Q()}function Q(){T.uniform.mesh.visible=E.uniform}function O(e){x.x=e.clientX,x.y=e.clientY}function k(){g.x=event.clientX,g.y=event.clientY,0===x.distanceTo(g)&&s.detach()}function L(e){b.x=e.clientX/window.innerWidth*2-1,b.y=-e.clientY/window.innerHeight*2+1,f.setFromCamera(b,c);var t=f.intersectObjects(u);if(t.length>0){var n=t[0].object;n!==s.object&&s.attach(n)}}},x=function e(t){var n=t.count,o=void 0===n?100:n,i=t.numSides,r=void 0===i?8:i,s=t.subdivisions,l=void 0===s?50:s,c=t.openEnded,p=void 0!==c&&c,u=t.dimension,d=void 0===u?2:u;Object(a["a"])(this,e);var m=1,v=1,f=new h["i"](m,m,v,r,l,p);f.rotateZ(Math.PI/2);var y=new h["S"],b=[],g=[],x=[],M=f.vertices,P=f.faceVertexUvs[0];f.faces.forEach((function(e,t){var n=e.a,o=e.b,i=e.c,a=M[n],r=M[o],s=M[i],l=[a,r,s],c=P[t];l.forEach((function(e,t){y.set(e.y,e.z).normalize();var n=Math.atan2(y.y,y.x);g.push(n),b.push(e.x),x.push(c[t].toArray())}))}));for(var T=new Float32Array(b),E=new Float32Array(g),S=new Float32Array(2*x.length),X=0;X<T.length;X++){var Y=Object(w["a"])(x[X],2),A=Y[0],Z=Y[1];S[2*X+0]=A,S[2*X+1]=Z}var I=new h["q"];I.instanceCount=o,I.setAttribute("position",new h["d"](T,1)),I.setAttribute("angle",new h["d"](E,1)),I.setAttribute("uv",new h["d"](S,2));var j=[];if(2===d)for(var z=Math.ceil(Math.pow(o,.5))-1,F=0;F<=z;F++)for(var Q=0;Q<=z;Q++)j.push(Q/z,0,F/z);else if(3===d)for(var O=Math.ceil(Math.pow(o,1/3)),k=0;k<O;k++)for(var L=0;L<O;L++)for(var C=0;C<O;C++)j.push(C/O,L/O,k/O);for(var D=[],q=Math.ceil(Math.pow(o,.5))-1,R=0;R<=q;R++)for(var W=0;W<=q;W++)D.push(W/q,R/q);return I.setAttribute("reader",new h["p"](new Float32Array(D),2)),I.setAttribute("offset",new h["p"](new Float32Array(j),3)),f.dispose(),I};function M(e){var t=P();return function(){var n,o=Object(c["a"])(e);if(t){var i=Object(c["a"])(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return Object(l["a"])(this,n)}}function P(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var T=function(e){Object(s["a"])(n,e);var t=M(n);function n(e){var o,i=e.el;Object(a["a"])(this,n),o=t.call(this);var s=Object(r["a"])(o);return o.el=i,o.renderer=new u["a"]({ctx:s}),o.camera=new d["a"]({ctx:s}),o.camera.position.z=10,o.scene=new h["J"],o.scene.background=new h["g"]("#121212"),o.onLoop((function(){o.renderer.render(o.scene,o.camera)})),new b({ctx:s.node({name:"CurveService"})}),o}return n}(p["a"]),E={components:{MenuArea:n("90ae").default},data:function(){return{getApp:!1}},mounted:function(){var e=new T({el:this.$refs.kv1});this.getApp=function(){return e},console.log(this.getApp())},beforeDestroy:function(){window.location.reload()}},S=E,X=n("2877"),Y=Object(X["a"])(S,o,i,!1,null,null,null);t["default"]=Y.exports}}]);
//# sourceMappingURL=chunk-2d0ab8b5.0d221092.js.map